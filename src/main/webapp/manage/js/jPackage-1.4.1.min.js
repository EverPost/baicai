(function(a){a.fn.isInclude=function(d){var f=/js$/i.test(d);var g=document.getElementsByTagName(f?"script":"link");for(var e=0;e<g.length;e++){if(g[e][f?"src":"href"].indexOf(d)!=-1){return true}}return false};a.fn.isCss3=function(){var f=document.createElement("div"),e="Khtml O Moz Webkit".split(" "),d=e.length;prop="textShadow";if(prop in f.style){return true}if("-ms-"+prop in f.style){return true}prop=prop.replace(/^[a-z]/,function(g){return g.toUpperCase()});while(d--){if(e[d]+prop in f.style){return true}}return false};a.jbox_close=function(){a("[id*='jbox-']").remove()};a.fn.extend({jslide:function(g,B){var w=a(this),k={type:"slide",interval:null,animateTime:500,direction:false,selector:"li",leftBtn:null,rightBtn:null,list:null,listDire:"horizontal",listSel:"li",listNum:5,listWidth:860,prevBtn:null,nextBtn:null,selClass:"",message:null,tabSel:null,tabEvent:"hover",tabClass:null},C=a.extend(k,g),y=w.find(C.selector),m=y.length,u=y.width(),x=0,r=0,p=!0,z=(C.list!==null&&C.list!==undefined)?Math.ceil(C.list.find(C.listSel).length/C.listNum):null,j=0,v=function(i){return x+i>=m?0:x+i},q=function(i){return x-i<0?m-1:x-i},A={slide:function(o,i){p=!0,x=typeof(i)=="number"?i:(o?q(1):v(1));y.css("float")==="none"?(y.hide().eq(x).css("margin-left",(o?-u:u)).add(y.eq(r)).show().animate({"margin-left":(o?"+":"-")+"="+u},C.animateTime,function(){if(p){r=x;typeof(g)==="function"?g(x):B&&B(x);p=!1}})):(y.parent().animate({"margin-left":x*-u},C.animateTime,function(){typeof(g)==="function"?g(x):B&&B(x)}));d(),e(),f()},focus:function(o,i){x=typeof(i)=="number"?i:(o?q(1):v(1));y.fadeOut().eq(x).fadeIn(C.animateTime,function(){typeof(g)==="function"?g(x):B&&B(x)});d(),e(),f()}},h=function(){C.listDire==="horizontal"?C.list.animate({left:-C.listWidth*j},C.animateTime):C.list.animate({top:-C.listWidth*j},C.animateTime)},e=function(){if(C.list!==null&&C.list!==undefined){C.list.find(C.listSel).removeClass().eq(x).addClass(C.selClass);j=Math.floor(x/C.listNum);h()}},f=function(){(C.message!==null&&C.message!==undefined)&&C.message.eq(x).show().siblings().hide()},d=function(){C.tabSel!=null&&w.find(C.tabSel).eq(x).addClass(C.tabClass).siblings().removeClass(C.tabClass)},n=C.interval&&setInterval(function(){A[C.type](C.direction)},C.interval);d();C.type=="slide"&&y.css("float")==="none"&&y.hide().eq(x).show().css("margin-left",0).end().eq(x+1).css("margin-left",u).end().eq(x-1).css("margin-left",-u);C.type=="focus"&&y.hide().eq(0).show();w.hover(function(){clearInterval(n)},function(){n=C.interval&&setInterval(function(){A[C.type](C.direction)},C.interval)});C.leftBtn!=null&&C.leftBtn.click(function(){if(a(":animated",w).length===0){A[C.type](false)}});C.rightBtn!=null&&C.rightBtn.click(function(){if(a(":animated",w).length===0){A[C.type](true)}});C.prevBtn!=null&&C.prevBtn.click(function(){if(a(":animated",w).length===0){j=j==0?0:j-1;h()}});C.nextBtn!=null&&C.nextBtn.click(function(){if(a(":animated",w).length===0){j=j==z-1?z-1:j+1;h()}});C.list!=null&&C.list.find(C.listSel).click(function(){a(":animated",w).stop(false,true);var i=a(this).index();A[C.type](i<=x,i)});C.tabSel!=null&&w.find(C.tabSel).bind(C.tabEvent,function(){if((a(":animated",w).length===0||C.type==="focus")&&x!==a(this).index()){A[C.type](false,a(this).index())}})},jbigimg:function(d){var g=a(this),h={effect:"fadeIn"},f=a.extend(h,d),e=a("<div id='bigimg' style='display:none; position:absolute; padding:5px; background-color:#fff; top:0px; left:0px; border:1px solid #ccc; z-index:1950;'><img /></div>").appendTo("body"),i=a("img",e);a(this).hover(function(j){var k=a(this);h_s=setTimeout(function(){i.attr("src",k.attr("src"));var n=k.offset().top,m=k.offset().left;if(n<a(window).scrollTop()+40){m>a(window).width()/2?e.fadeIn("fast").offset({top:n+k.height()+5,left:m-e.width()+k.width()-18}):e.fadeIn("fast").offset({top:n+k.height()+5,left:m})}else{if(n+k.height()>a(window).scrollTop()+a(window).height()*3/5){m>a(window).width()/2?e.fadeIn("fast").offset({top:n-e.height()-18,left:m-e.width()+k.width()-18}):e.fadeIn("fast").offset({top:n-e.height()-18,left:m})}else{if(m>a(window).width()/2){e.fadeIn("fast").offset({top:n,left:m-e.width()-18})}else{m+k.width()+e.width()<a(window).width()?e.fadeIn("fast").offset({top:n,left:m+k.width()}):e.fadeIn("fast").offset({top:n+k.height()+5,left:m})}}}},500)},function(){clearTimeout(h_s);e.is(":visible")&&e.fadeOut("fast")})},jbox_close:function(){a("[id*='jbox-']").remove()},jbox:function(e,f,d){option={locked:false,width:800,height:600,opacity:0.4,url:"",border:15,effect:"height-width",s_effect:"fadeIn",para:"data-inbox",closebtn:true,adaptive:false,top:10,icss:{},paracut:""};return this.each(function(){var g=a(window).resize(function(){ww=a(this).width(),wh=a(this).height(),l=(ww-a("#jbox-content").width())/2,t=(wh-a("#jbox-content").height())/2;a("#jbox-content").css({top:t,left:l});a("#jbox-border").css({top:t-h.border,left:l-h.border})}),h=a.extend(option,e),j=(typeof(e)==="boolean"&&e)||f?"openbox":"click",i=function(m,k){if(m.attr(h.para)!=undefined){if(a(m.attr(h.para).replace(h.paracut,"")).length!=0){a(m.attr(h.para).replace(h.paracut,"")).clone(true).prependTo(k);typeof(e)==="function"?e():(typeof(f)==="function"?f():(d&&d()))}else{if(m.attr(h.para).replace(h.paracut,"").split(":")[0]=="img"){a("<img />").attr("src",m.attr(h.para).replace(h.paracut,"").split(":")[1]).prependTo(c);typeof(e)==="function"?e():(typeof(f)==="function"?f():(d&&d()))}else{a.ajax({url:m.attr(h.para).replace(h.paracut,""),success:function(n){k.html(a.trim(n));typeof(e)==="function"?e():(typeof(f)==="function"?f():(d&&d()))}})}}}else{if(h.url&&h.url!=""){a.ajax({url:h.url,success:function(n){k.html(a.trim(n));typeof(e)==="function"?e():(typeof(f)==="function"?f():(d&&d()))}})}}};a(this).bind(j,function(){_this=a(this),ww=g.width(),wh=g.height(),l=(ww-h.width)/2,t=(wh-h.height)/2;if(a(_this.attr(h.para).replace(h.paracut,"")).length!=0&&h.adaptive){var k=a(_this.attr(h.para).replace(h.paracut,""));h.width=k.width()!=0?k.width():h.width;h.height=k.height()!=0?k.height():h.height}if(h.adaptive){h.height="auto";t=h.top+15}g.one("keyup",function(m){m=m||window.event;m.keyCode==27&&c.add(ic).add(s).add(b).remove()}),s=a("<div id='jbox-shadow'><div>").appendTo("body").css({opacity:h.opacity}).one("click",function(){!h.locked&&c.add(ic).add(s).add(b).remove(),this.onselectstart=function(){return false}}),b=a("<div id='jbox-border'></div>").appendTo("body").css({padding:h.border,top:t-h.border,left:l-h.border,height:h.height+20,width:h.width+40}).hide(),c=a("<div id='jbox-content'></div>").appendTo(b).css({}),ic=a("<div id='jbox-incontent'></div>").appendTo(c).css({height:h.height,width:h.width}).css(h.icss),btnc=h.closebtn&&a("<div class='jbox-close'></div>").appendTo(c).css({right:-10}).click(function(){c.add(ic).add(s).add(b).remove()}).hide();a.fn.isCss3()&&btnc.removeClass("jbox-close").addClass("jbox-close-css3");if(h.effect!=""&&h.effect!=null&&!h.adaptive){b.show();if(h.effect.indexOf("bottom")>=0){b.css("top",1000)}else{if(h.effect.indexOf("top")>=0){b.css("top",-1000)}}if(h.effect.indexOf("left")>=0){b.css("left",-1000)}else{if(h.effect.indexOf("right")>=0){b.css("left",1000)}}if(h.effect.indexOf("height")>=0){b.css({top:t+h.height/2,height:0}),c.hide()}if(h.effect.indexOf("width")>=0){b.css({left:l+h.width/2,width:0}),c.hide()}b.animate({left:l-h.border,top:t-h.border,height:h.height+20,width:h.width+40},function(){c.add(btnc).show();i(_this,ic)})}else{b.fadeIn(function(){btnc.show()});i(_this,ic);if(b.height()+h.border*2+h.top>g.height()){ic.height(g.height()-(h.top+10+h.border)*2)}}if(h.s_effect!=""&&h.s_effect!=null){s.hide()[h.s_effect]()}});if((typeof(e)==="boolean"&&e)||f){a(this).trigger("openbox").unbind("openbox")}})},jshake:function(e,d){var m=this,k={freq:5,margin:5,prop:"right",speed:300},h=a.extend(k,e),j=0,g=Number(m.css(h.prop).replace("px",""));h.speed=h.speed/h.freq;function f(o,q){o++;var p=o%2==1?h.margin:-h.margin,n;switch(h.prop){case"right":n={right:g+p};break;case"margin-right":n={"margin-right":g+p};break;case"left":n={left:g+p};break;case"margin-left":n={"margin-left":g+p};break;default:n=null}q.stop().animate(n,h.speed,function(){if(o>h.freq){n[h.prop]=g;q.animate(n,h.speed,function(){typeof(e)==="function"?e():d&&d()});return}f(o,q)})}if(!m.is(":animated")){f(j,m)}return m},jbrowse:function(f){!a.fn.isInclude("jPackage.css")&&a("<link>").attr({rel:"stylesheet",type:"text/css",href:"jPackageCss/jPackage.css"}).appendTo("head");var e=a.fn.isInclude("jquery.mousewheel.js"),d={speed:300,width:150,height:"auto",size:5,border:true};return this.each(function(){var N=a.extend(d,f),I=a(this).css({overflow:"hidden"}),k=a("ul",I).height(180).wrap("<div class='jbrowse-content'></div>"),H=k.parent("div").width((N.width+40)*N.size),x=a("<div class='jbrowse-back'></div>").prependTo(I),L=a("<div class='jbrowse-forward'></div>").appendTo(I),j=a("li",I).width(N.width),F=a("<div class='jbrowse-background'></div>").css({opacity:0.5}).appendTo(I),y=a("<div class='jbrowse-container'></div>").appendTo(I),q=a("<img class='jbrowse-tempimg' />").appendTo(I),o=a("<img class='jbrowse-img' />").appendTo(y).wrap("<div class='jbrowse-warp'></div>"),i=o.parent(),v=a("<div class='jbrowse-move'></div>").appendTo(i),r=a("<div class='jbrowse-prev'></div>").prependTo(y),u=a("<div class='jbrowse-next'></div>").appendTo(y),M=j.length,m=true,A=null;I[0].ondragstart=function(){return false};k.width((N.width+40)*M);!N.border&&o.css({"margin-top":(a(window).height()-30)/2,"margin-left":(a(window).width()-100)/2});a("img",j).css({width:N.width,height:N.height});if(a.browser.msie&&parseInt(a.browser.version)===8&&N.height!=180){j.each(function(){a("img",this).css({"margin-top":(180-a("img",this).height())/2})})}var J=0;x.click(function(){J=J>0?J-1:(M-N.size<0?0:M-N.size);k.stop(true,false).animate({"margin-left":-(N.width+40)*J})});L.click(function(){J=J<M-N.size?J+1:0;k.stop(true,false).animate({"margin-left":-(N.width+40)*J})});var K=0;r.click(function(){if(K>0){K--}else{K=0;return}h()});u.click(function(){if(K<M-1){K++}else{K=M-1;return}h()});j.click(function(){K=a(this).index();h()});var n=1,z=1,C,p,D;var h=function(){m=false;q.height("auto");o.add(q).attr("src",a("img",j.eq(K)).attr("src")).css({margin:0});D={width:q.width(),height:q.height()};q.height()>=a(window).height()-50?q.height(a(window).height()-50):q.height("");var Q={width:q.width(),height:q.height()};C=(a(window).height()-Q.height)/2-10;p=(a(window).width()-Q.width)/2-10;n=z=Q.width/D.width;if(N.border){if(y.is(":hidden")){y.add(F).show().css({top:a(window).height()/2,left:a(window).width()/2})}y.add(o).add(F).add(i).stop(true,false).animate({top:C,left:p,width:Q.width,height:Q.height},N.speed,function(){y.attr("vis","true");u.add(r).show().css({top:(Q.height-35)/2});v.show();setTimeout(function(){m=true},500);A=A==undefined&&a("<div class='jbrowse-p-info'><span></span>%</div>").appendTo(i).css({top:Q.height/2,left:Q.width/2})});u.add(r).hide();v.css({top:0,width:Q.width,height:Q.height+20,opacity:0}).hide()}else{if(!N.border){if(y.is(":hidden")){y.add(F).show().css({top:0,left:0,width:a(window).width()-100,height:a(window).height()-30})}o.stop(true,false).css({"margin-top":(a(window).height()-Q.height)/2-10,"margin-left":(a(window).width()-Q.width)/2-10,width:Q.width,height:Q.height},N.speed,function(){y.attr("vis","true");setTimeout(function(){m=true},500);A=A==undefined&&a("<div class='jbrowse-p-info'><span></span>%</div>").appendTo(i).css({top:Q.height/2-15,left:Q.width/2-35})});u.add(r).stop(true,false).animate({top:(a(window).height()-65)/2});v.css({top:0,width:a(window).width()-100,height:a(window).height(),opacity:0,margin:"auto"})}}};if(N.border){a(document).click(function(Q){if(I.find(Q.target).length!=0){return false}if(y.attr("vis")=="true"&&m){y.add(o).add(F).animate({top:a(window).height()/2-10,left:a(window).width()/2-10,width:0,height:0},N.speed,function(){y.attr("vis","false").hide();F.hide()})}})}else{if(!N.border){a(document).keyup(function(Q){Q=Q||window.event;Q.keyCode==27&&F.add(y).hide()})}}if(e){var O=false,P=true,G=true,B={x:0,y:0},w={x:0,y:0},g=null;v.bind("mousewheel",function(Q,R){E(Q,R)}).dblclick(function(){E(event,1)}).mousedown(function(Q){O=true;Q=Q||window.event;B={x:Q.clientX,y:Q.clientY},w={x:Number(o.css("margin-left").replace("px","")),y:Number(o.css("margin-top").replace("px",""))}}).mousemove(function(Q){if(!O){return}Q=Q||window.event;o.css({"margin-left":w.x+(Q.clientX-B.x),"margin-top":w.y+(Q.clientY-B.y)})}).mouseover(function(){P=false;window.onmousewheel=function(){if(!P){return false}}}).mouseup(function(){O=false}).mouseout(function(){O=false;P=true});var E=function(R,S){if(G){R=R||window.event;G=false;w={x:R.clientX-i.offset().left,y:R.clientY-i.offset().top};ml=(w.x-Number(o.css("margin-left")=="auto"?0:o.css("margin-left").replace("px","")))/n;mt=(w.y-Number(o.css("margin-top")=="auto"?0:o.css("margin-top").replace("px","")))/n;a("span",A).text((n*100).toString().split(".")[0]).parent().fadeIn();n=n+S*n*0.5;ml=-(ml*n-w.x);mt=-(mt*n-w.y);if(g!=null){clearTimeout(g)}o.animate({width:D.width*n,height:D.height*n,"margin-left":ml,"margin-top":mt},500,function(){G=true;g=setTimeout(function(){A.fadeOut()},1000);clearInterval(Q);a("span",A).text((n*100).toString().split(".")[0])});n>1&&a("span",A).text(Number((n*100).toString().split(".")[0])-50*S);var Q=setInterval(function(){a("span",A).text(Number(a("span",A).text())+S);if(Number((n*100).toString().split(".")[0])==Number(a("span",A).text())){clearInterval(Q)}},10)}}}})},jselect:function(e,d){option={options:[["0","请选择"]],selected:0,name:""};a(document).click(function(f){!a(f.target).add(a(f.target).parents()).hasClass("jselect-main")&&a(".jselect-list").hide()});return this.each(function(){var g=a.extend(option,e),m=a(this).empty(),f=a("<q></q>").appendTo(m),p=a("<input type='hidden' />").appendTo(m).attr("name",g.name),n=a("<div class='jselect-triangle'><div></div></div>").appendTo(m),h=a("<div class='jselect-list'></div>").appendTo(m),o=[];m.addClass("jselect-main");if(typeof(g.options[0])=="string"){o[o.length]="<ul>";for(var j=0;j<g.options.length;j++){o[o.length]="<li value='"+j+"'>"+g.options[j]+"</li>"}o[o.length]="</ul>";h.html(o.join(""));if(typeof(g.selected)!="boolean"||g.selected){f.text(g.options[g.selected]).attr("value",g.selected);p.val(g.selected)}}else{o[o.length]="<ul>";for(var j=0;j<g.options.length;j++){o[o.length]="<li value='"+g.options[j][0]+"'>"+g.options[j][1]+"</li>"}o[o.length]="</ul>";h.html(o.join(""));if(typeof(g.selected)!="boolean"||g.selected){f.text(g.options[g.selected][1]).attr("value",g.options[g.selected][0])}}if(g.options.length>10){h.css({"max-height":a("li",m).height()*10,"overflow-y":"scroll"})}m.unbind("click").click(function(){k()});var k=function(){var i=a(".jselect-list",m);a(".jselect-list").not(i).hide();i.is(":hidden")?i.show():i.hide()};a("ul li",h).click(function(){var q=a(this),i=f.attr("value"),r=q.attr("value");if(i!=r){f.text(q.text()).attr("value",r);p.val(r);typeof(d)==="function"&&d(q.attr("value"))}})})},jnumroll:function(d){return this.each(function(){if(typeof(d)=="number"){if(a(".jnum-behidden",this).length==0){w=d.toString().split("");var v=[];for(var m=0;m<a("dl:not(.jnum-split)",this).length-w.length;m++){v[m]="0"}for(var m=0;m<w.length;m++){v[v.length]=w[m]}a("dl",this).not(".jnum-split").each(function(j){a(this).animate({top:-Number(v[j])*_height})})}}else{option={type:1,split:true,before:"",end:""};var f=a.extend(option,d),o=a(this),h=o.width(),w=o.text().split(""),u=w.length,n=h/u;_height=o.height();if(w[0]=="0"){f.split=false}var q=a("<div class='jnum-main' />").appendTo(o.empty().html("&nbsp;")).css({height:_height,"line-height":_height+"px"});q.css({top:o.offset().top-q.offset().top});var g=u%3,e=[];if(f.before!=""){e[e.length]="<dl class='jnum-split'>"+f.before+"</dl>"}for(var m=0;m<u;m++){e[e.length]="<dl style='width:"+n+"px;'>";if(f.type==2){e[e.length]="<dd class='jnum-behidden'>9</dd>"}for(var k=0;k<10;k++){e[e.length]="<dd>"+k+"</dd>"}e[e.length]="</dl>";if(f.split&&(m+1)%3==g&&m!=u-1){e[e.length]="<dl class='jnum-split' style='width:"+n+"px;'>,</dl>"}}if(f.end!=""){e[e.length]="<dl class='jnum-split'>"+f.end+"</dl>"}q.html(e.join(""));var r=0;a("dl",q).each(function(){r=r+a(this).css({left:r}).width()});q.width(r);var p=w.length-1;if(f.type==1){a("dl",q).not(".jnum-split").css({top:-(_height*9)}).each(function(j){a(this).animate({top:-Number(w[j])*_height})})}else{if(f.type==2){zero=true;a("dl",q).not(".jnum-split").css({top:-(_height*10)}).each(function(x){if(w[x]!="0"){zero=false}else{if(w[x]=="0"&&zero){a(this).animate({top:-Number(w[x])*_height}).find(".jnum-behidden").remove()}}if(!zero){var z=-(_height*10),y=this,j=w;y.interval=setInterval(function(){if(z==0){z=-(_height*10)}a(y).css({top:z++});if(x==p&&z==-Number(j[x])*_height){p--;a(y).css({top:z}).find(".jnum-behidden").remove();clearInterval(y.interval);return false}},1)}})}}}})}});setTimeout(function(){var d=null;a("*[data-title]").hover(function(f){var g=a(this);d=setTimeout(function(){a("<div id='jtips-main'></div>").html(g.attr("data-title")).appendTo("body").fadeIn().css({top:f.clientY+10,left:f.clientX+10})},300)},function(){clearTimeout(d);a("#jtips-main").fadeOut(function(){a(this).remove()})})},500)})(jQuery);